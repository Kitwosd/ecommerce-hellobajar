{% extends 'base.html' %}
{% load static %}

{% block title %}cat.fruit - hello_bajar{% endblock %}

{% block extra_css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<link href="{% static 'css/.css' %}" rel="stylesheet">
<style>
  .container-fluid {
    animation: fadeIn 0.3s ease-in;
  }


  .breadcrumb {
    background: none;
    padding: 0;
    margin: 1rem 0;
    animation: fadeIn 0.3s ease-in;
  }

  .breadcrumb-item a {
    color: #6c757d;
    text-decoration: none;
  }

  .filter-sidebar {
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
  }

  .filter-btn {
    background: #17a2b8;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    transition: 0.3s ease;
  }

  .filter-btn:hover {
    background: #138496;
  }

  .product-card {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .product-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .product-image img {
    width: 100%;
    height: 160px;
    object-fit: contain;
  }



  .product-name {
    font-size: 16px;
    font-weight: bold;
    line-height: 20px;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    word-break: break-word;
    margin: 0 0 4px 0;
    padding: 0;
  }

  .price {
    text-align: left;
    color: #999;
    font-size: 16px;
    font-weight: 500;
    font-style: oblique;
    font-family: "Franklin Gothic Medium";
  }

  .best-price {
    font-size: 20px;
    font-weight: 700;
    color: #e74c3c;
    font-weight: bold;
  }

  .stock-status {
    font-size: 0.85rem;
    margin-bottom: 0;
  }

  .stock-status i {
    font-size: 0.9em;
  }

  .stock-status.in-stock {
    color: #28a745;
  }

  .stock-status.out-of-stock {
    color: #dc3545;
  }

  .discount-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background: #dc3545;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
  }

  .sort-controls {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .view-btn {
    padding: 0.25rem 0.5rem;
    border: 1px solid #dee2e6;
    background: white;
    color: #6c757d;
  }

  .view-btn.active {
    background: #007bff;
    color: white;
    border-color: #007bff;
  }

  .results-count {
    color: #6c757d;
    font-size: 0.9rem;
  }

  .btn-select {
    flex: 1;
    background: #dc3545;
    color: white;
    border: none;
    padding: 0.5rem;
    border-radius: 4px;
    font-size: 0.85rem;
    font-weight: 500;
  }

  .btn-select:hover {
    background: #c82333;
    color: white;
  }

  .wrapper {
    width: 400px;
    background: #fff;
    border-radius: 10px;
    padding: 20px 25px 40px;
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);
  }

  header h2 {
    font-size: 24px;
    font-weight: 600;
  }

  header p {
    margin-top: 5px;
    font-size: 16px;
  }

  .price-input {
    width: 100%;
    display: flex;
    margin: 30px 0 35px;
  }

  .price-input .field {
    display: flex;
    width: 100%;
    height: 45px;
    align-items: center;
  }

  .field input {
    width: 100%;
    height: 100%;
    outline: none;
    font-size: 19px;
    margin-left: 12px;
    border-radius: 5px;
    text-align: center;
    border: 1px solid #999;
    -moz-appearance: textfield;
  }

  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
  }

  .price-input .separator {
    width: 130px;
    display: flex;
    font-size: 19px;
    align-items: center;
    justify-content: center;
  }

  .slider {
    height: 5px;
    position: relative;
    background: #ddd;
    border-radius: 5px;
  }

  .slider .progress {
    height: 100%;
    left: 25%;
    right: 25%;
    position: absolute;
    border-radius: 5px;
    background: #17a2b8;
  }

  .range-input {
    position: relative;
  }

  .range-input input {
    position: absolute;
    width: 100%;
    height: 5px;
    top: -5px;
    background: none;
    pointer-events: none;
    -webkit-appearance: none;
    -moz-appearance: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    height: 17px;
    width: 17px;
    border-radius: 50%;
    background: #17a2b8;
    pointer-events: auto;
    -webkit-appearance: none;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.05);
  }

  input[type="range"]::-moz-range-thumb {
    height: 17px;
    width: 17px;
    border: none;
    border-radius: 50%;
    background: #17a2b8;
    pointer-events: auto;
    -moz-appearance: none;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.05);
  }

  /* Support */
  .support-box {
    top: 2rem;
    position: relative;
    bottom: 0;
    text-align: center;
    display: block;
  }

  .b-btn {
    color: white;
    text-decoration: none;
    font-weight: bold;
  }

  .b-btn.paypal i {
    color: blue;
  }

  .b-btn:hover {
    text-decoration: none;
    font-weight: bold;
  }

  .b-btn i {
    font-size: 20px;
    color: yellow;
    margin-top: 2rem;
  }

  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .card:hover {
    transform: scale(1.05);
    /* scale both X & Y */
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    /* optional */
  }

  .wishlist-toast {
    position: fixed;
    top: 65px;
    right: 15px;
    z-index: 1000;
    min-width: 300px;
    background-color: green !important;
    color: white !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    opacity: 0.8;
  }

  /* State for the toast when it is SHOWN */
  .wishlist-toast.show {
    opacity: 1;
  }

  .like-btn {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: whitesmoke;
    border: none;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    z-index: 10;
  }

  .like-btn:hover {
    transform: scale(1.1);
    background: rgba(255, 255, 255, 1) !important;

  }

  .like-btn.liked i {
    color: #e91e63 !important;
  }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid px-4 mt-4">
  <div class="row">
    <!-- Filter Sidebar (Left) -->
    <div class="col-lg-3">
      <div class="filter-sidebar">
        <h2>Price Range</h2>
        <p>Use slider or enter min and max price</p>
        <div class="price-input">
          <div class="field">
            <span>Min</span>
            <input type="number" class="input-min" value="0">
          </div>
          <div class="separator">-</div>
          <div class="field">
            <span>Max</span>
            <input type="number" class="input-max" value="10000">
          </div>
        </div>
        <div class="slider">
          <div class="progress"></div>
        </div>
        <div class="range-input">
          <input type="range" class="range-min" min="0" max="10000" value="0" step="100">
          <input type="range" class="range-max" min="0" max="10000" value="500" step="100">
        </div>
        <div class="text-center mt-4">
          <button class="filter-btn">Apply Filter</button>
        </div>
      </div>
    </div>

    <!-- Main Content (Right) -->
    <div class="col-lg-9">
      <div class="container-fluid">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h2 class="mb-0">Fruits</h2>
          <select class="form-select form-select-sm" style="width: auto;">
            <option>Default sorting</option>
            <option>Price: Low to High</option>
            <option>Price: High to Low</option>
            <option>Newest First</option>
          </select>
        </div>

        <div id="product-grid" class="row g-3">
          <!-- Product 1 -->
          <div class="col-6 col-sm-4 col-md-3 col-lg-3 col-xl-3  mb-4 product-item" data-category="groceries"
            data-subcategory="fruits" data-tag="organic" data-brand="local" data-name="apple">
            <a href="{% url 'store:product_detail' %}" class="text-decoration-none text-dark">
              <div class="card h-100 shadow-sm rounded product-card">
                <div class="card-body">
                  <div class="text-center position-relative">
                    <img src="{% static 'images/apple.jpg' %}" class="img-fluid mb-2" alt="Apple"
                      style="max-height:160px; object-fit:contain;">
                    <div class="discount-badge">-20%</div>
                    <button class="like-btn position-absolute" onclick="toggleLike(this)">
                      <i class="fas fa-heart" style="color: #ccc; font-size: 14px;"></i>
                    </button>
                  </div>
                  <h6 class="product-name">Fresh Red Apple from Mustang</h6>
                  <p class="stock-status out-of-stock">
                    <i class="fas fa-times-circle"></i> Out of stock
                  </p>
                  <div class="price">
                    <span class="old-price text-muted text-decoration-line-through me-2">Rs.
                      250</span>
                    <span class="best-price fw-bold text-danger">Rs. 200</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between mt-2">
                    <button type="button" class="btn btn-sm btn-success w-100"><i class="bi bi-cart3"></i> Buy
                      Now</button>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <!-- Product 2 -->
          <div class="col-6 col-sm-4 col-md-3 col-lg-3 col-xl-3 mb-4 product-item" data-category="groceries"
            data-subcategory="dairy" data-tag="organic" data-brand="local" data-name="basmati rice">
            <a href="" class="text-decoration-none text-dark">
              <div class="card h-100 shadow-sm rounded product-card">
                <div class="card-body">
                  <div class="text-center position-relative">
                    <img src="{% static 'images/basmati_rice.jpg' %}" class="img-fluid mb-2" alt="basmati rice"
                      style="max-height:160px; object-fit:contain;">
                    <div class="discount-badge">-15%</div>
                    <button class="like-btn position-absolute" onclick="toggleLike(this)">
                      <i class="fas fa-heart" style="color: #ccc; font-size: 14px;"></i>
                    </button>
                  </div>
                  <h6 class="product-name">Premium Basmati Rice</h6>
                  <p class="stock-status in-stock">
                    <i class="fas fa-check-circle"></i> In stock
                  </p>
                  <div class="price">
                    <span class="old-price text-muted text-decoration-line-through me-2">Rs.
                      850</span>
                    <span class="best-price fw-bold text-danger">Rs. 720</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between mt-2">
                    <button type="button" class="btn btn-sm btn-success w-100"><i class="bi bi-cart3"></i> Buy
                      Now</button>
                  </div>
                </div>
              </div>
            </a>
          </div>

          <!-- Product 3  -->
          <div class="col-6 col-sm-4 col-md-3 col-lg-3 col-xl-3 mb-4 product-item" data-category="groceries"
            data-subcategory="" data-tag="" data-brand="fortune" data-name="sunflower oil">
            <a href="" class="text-decoration-none text-dark">
              <div class="card h-100 shadow-sm rounded product-card">
                <div class="card-body">
                  <div class="text-center position-relative">
                    <img src="{% static 'images/Sunflower_oil.jpg' %}" class="img-fluid mb-2" alt="sunflower oil"
                      style="max-height:160px; object-fit:contain;">
                    <div class="discount-badge">-25%</div>
                  </div>
                  <h6 class="product-name">Fortune Sunflower Oil</h6>
                  <p class="stock-status in-stock">
                    <i class="fas fa-check-circle"></i> In stock
                  </p>
                  <div class="price">
                    <span class="old-price text-muted text-decoration-line-through me-2">Rs.
                      320</span>
                    <span class="best-price fw-bold text-danger">Rs. 240</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between mt-2">
                    <button type="button" class="btn btn-sm btn-success w-100"><i class="bi bi-cart3"></i> Buy
                      Now</button>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <!-- Product 4 -->
          <div class="col-6 col-sm-4 col-md-3 col-lg-3 col-xl-3 mb-4 product-item" data-category="groceries"
            data-subcategory="" data-tag="" data-brand="fortune" data-name="sunflower oil">
            <a href="" class="text-decoration-none text-dark">
              <div class="card h-100 shadow-sm rounded product-card">
                <div class="card-body">
                  <div class="text-center position-relative">
                    <img src="{% static 'images/Sunflower_oil.jpg' %}" class="img-fluid mb-2" alt="sunflower oil"
                      style="max-height:160px; object-fit:contain;">
                    <div class="discount-badge">-25%</div>
                  </div>
                  <h6 class="product-name">Fortune Sunflower Oil</h6>
                  <p class="stock-status in-stock">
                    <i class="fas fa-check-circle"></i> In stock
                  </p>
                  <div class="price">
                    <span class="old-price text-muted text-decoration-line-through me-2">Rs.
                      320</span>
                    <span class="best-price fw-bold text-danger">Rs. 240</span>
                  </div>
                  <div class="d-flex align-items-center justify-content-between mt-2">
                    <button type="button" class="btn btn-sm btn-success w-100"><i class="bi bi-cart3"></i> Buy
                      Now</button>
                  </div>
                </div>
              </div>
            </a>
          </div>
          <!-- ... -->
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-center mt-4">
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1">Previous</a>
        </li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">4</a></li>
        <li class="page-item">
          <a class="page-link" href="#">Next</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script>const rangeInput = document.querySelectorAll(".range-input input"),
    priceInput = document.querySelectorAll(".price-input input"),
    range = document.querySelector(".slider .progress");

  let priceGap = 1000;

  // Price input event listeners
  priceInput.forEach((input) => {
    input.addEventListener("input", (e) => {
      let minPrice = parseInt(priceInput[0].value),
        maxPrice = parseInt(priceInput[1].value);

      if (maxPrice - minPrice >= priceGap && maxPrice <= rangeInput[1].max) {
        if (e.target.className === "input-min") {
          rangeInput[0].value = minPrice;
          range.style.left = (minPrice / rangeInput[0].max) * 100 + "%";
        } else {
          rangeInput[1].value = maxPrice;
          range.style.right = 100 - (maxPrice / rangeInput[1].max) * 100 + "%";
        }
      }
    });
  });

  // Range input event listeners
  rangeInput.forEach((input) => {
    input.addEventListener("input", (e) => {
      let minVal = parseInt(rangeInput[0].value),
        maxVal = parseInt(rangeInput[1].value);

      if (maxVal - minVal < priceGap) {
        if (e.target.className === "range-min") {
          rangeInput[0].value = maxVal - priceGap;
        } else {
          rangeInput[1].value = minVal + priceGap;
        }
      } else {
        priceInput[0].value = minVal;
        priceInput[1].value = maxVal;
        range.style.left = (minVal / rangeInput[0].max) * 100 + "%";
        range.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
      }
    });
  });

  // Function to extract price from price string
  function extractPrice(priceText) {
    // Remove "Rs." and any commas, then parse as integer
    return parseInt(priceText.replace(/[^\d]/g, ''));
  }

  // Function to filter products by price range
  function filterProductsByPrice(minPrice, maxPrice) {
    const productItems = document.querySelectorAll('.product-item');
    let visibleCount = 0;

    productItems.forEach(product => {
      const priceElement = product.querySelector('.best-price');
      if (priceElement) {
        const productPrice = extractPrice(priceElement.textContent);

        if (productPrice >= minPrice && productPrice <= maxPrice) {
          product.style.display = 'block';
          visibleCount++;
        } else {
          product.style.display = 'none';
        }
      }
    });

    // Update results count or show message
    updateResultsMessage(visibleCount);
  }

  // Function to update results message
  function updateResultsMessage(count) {
    let messageElement = document.querySelector('.results-message');

    if (!messageElement) {
      messageElement = document.createElement('div');
      messageElement.className = 'results-message alert alert-info mb-3';
      document.querySelector('#product-grid').parentNode.insertBefore(
        messageElement,
        document.querySelector('#product-grid')
      );
    }

    if (count === 0) {
      messageElement.innerHTML = '<i class="fas fa-info-circle"></i> No products found in this price range.';
      messageElement.className = 'results-message alert alert-warning mb-3';
    } else {
      messageElement.innerHTML = `<i class="fas fa-check-circle"></i> Showing ${count} product(s) in your price range.`;
      messageElement.className = 'results-message alert alert-info mb-3';
    }
  }

  // Function to reset filters
  function resetFilters() {
    const productItems = document.querySelectorAll('.product-item');
    productItems.forEach(product => {
      product.style.display = 'block';
    });

    const messageElement = document.querySelector('.results-message');
    if (messageElement) {
      messageElement.remove();
    }
  }

  // Apply Filter button functionality
  document.addEventListener('DOMContentLoaded', function () {
    const filterBtn = document.querySelector('.filter-btn');

    if (filterBtn) {
      filterBtn.addEventListener('click', function () {
        const minPrice = parseInt(priceInput[0].value);
        const maxPrice = parseInt(priceInput[1].value);

        // Validate price range
        if (minPrice >= maxPrice) {
          alert('Minimum price should be less than maximum price.');
          return;
        }

        // Apply the filter
        filterProductsByPrice(minPrice, maxPrice);

        // Add visual feedback
        filterBtn.innerHTML = '<i class="fas fa-check"></i> Applied!';
        filterBtn.classList.add('btn-success');

        setTimeout(() => {
          filterBtn.innerHTML = 'Apply Filter';
          filterBtn.classList.remove('btn-success');
        }, 2000);
      });
    }

    // Add a reset filter button
    const resetBtn = document.createElement('button');
    resetBtn.className = 'filter-btn mt-2 btn-outline-secondary';
    resetBtn.innerHTML = '<i class="fas fa-refresh"></i> Reset Filters';
    resetBtn.addEventListener('click', resetFilters);

    const filterBtnContainer = document.querySelector('.text-center.mt-4');
    if (filterBtnContainer) {
      filterBtnContainer.appendChild(resetBtn);
    }

    // Optional: Auto-filter as user moves the slider
    let filterTimeout;
    rangeInput.forEach(input => {
      input.addEventListener('input', () => {
        clearTimeout(filterTimeout);
        filterTimeout = setTimeout(() => {
          const minPrice = parseInt(priceInput[0].value);
          const maxPrice = parseInt(priceInput[1].value);
          filterProductsByPrice(minPrice, maxPrice);
        }, 500); // Delay to prevent too frequent filtering
      });
    });
  });

  // Sorting functionality
  function sortProducts(criteria) {
    const productGrid = document.querySelector('#product-grid');
    const products = Array.from(document.querySelectorAll('.product-item'));

    let sortedProducts;

    switch (criteria) {
      case 'Price: Low to High':
        sortedProducts = products.sort((a, b) => {
          const priceA = extractPrice(a.querySelector('.best-price').textContent);
          const priceB = extractPrice(b.querySelector('.best-price').textContent);
          return priceA - priceB;
        });
        break;

      case 'Price: High to Low':
        sortedProducts = products.sort((a, b) => {
          const priceA = extractPrice(a.querySelector('.best-price').textContent);
          const priceB = extractPrice(b.querySelector('.best-price').textContent);
          return priceB - priceA;
        });
        break;

      case 'Newest First':
        // Sort by products with "new-arrivals" tag first
        sortedProducts = products.sort((a, b) => {
          const tagsA = a.getAttribute('data-tags') || '';
          const tagsB = b.getAttribute('data-tags') || '';
          const isNewA = tagsA.includes('new-arrivals') ? 1 : 0;
          const isNewB = tagsB.includes('new-arrivals') ? 1 : 0;
          return isNewB - isNewA;
        });
        break;

      case 'Default sorting':
      default:
        // Reset to original order (you might want to store original order)
        sortedProducts = products.sort((a, b) => {
          // Sort by original DOM position or by product name
          const nameA = a.getAttribute('data-name').toLowerCase();
          const nameB = b.getAttribute('data-name').toLowerCase();
          return nameA.localeCompare(nameB);
        });
        break;
    }

    // Clear the grid and re-append sorted products
    productGrid.innerHTML = '';
    sortedProducts.forEach(product => {
      productGrid.appendChild(product);
    });

    // Show sorting feedback
    showSortingFeedback(criteria);
  }

  // Function to show sorting feedback
  function showSortingFeedback(criteria) {
    let feedbackElement = document.querySelector('.sorting-feedback');

    if (!feedbackElement) {
      feedbackElement = document.createElement('div');
      feedbackElement.className = 'sorting-feedback alert alert-success mb-3';
      document.querySelector('#product-grid').parentNode.insertBefore(
        feedbackElement,
        document.querySelector('#product-grid')
      );
    }

    feedbackElement.innerHTML = `<i class="fas fa-sort"></i> Products sorted by: <strong>${criteria}</strong>`;
    feedbackElement.style.display = 'block';

    // Auto-hide feedback after 3 seconds
    setTimeout(() => {
      if (feedbackElement) {
        feedbackElement.style.display = 'none';
      }
    }, 3000);
  }

  // Initialize the slider visual state and sorting functionality on page load
  document.addEventListener('DOMContentLoaded', function () {
    // Slider initialization
    const minVal = parseInt(rangeInput[0].value);
    const maxVal = parseInt(rangeInput[1].value);

    range.style.left = (minVal / rangeInput[0].max) * 100 + "%";
    range.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";

    priceInput[0].value = minVal;
    priceInput[1].value = maxVal;

    // Sorting dropdown functionality
    const sortingSelect = document.querySelector('.form-select');
    if (sortingSelect) {
      sortingSelect.addEventListener('change', function (e) {
        const selectedCriteria = e.target.value;
        sortProducts(selectedCriteria);

        // Add visual feedback to the select
        sortingSelect.style.borderColor = '#28a745';
        setTimeout(() => {
          sortingSelect.style.borderColor = '';
        }, 1000);
      });
    }
  });

  function toggleLike(button) {
    // Prevent the link from being followed
    event.preventDefault();
    event.stopPropagation();

    const isLiked = button.classList.contains('liked');
    button.classList.toggle('liked');

    // Get product details
    const productItem = button.closest('.product-item');

    // Show feedback message
    if (!isLiked) {
      showWishlistMessage(`<i class="bi bi-suit-heart-fill"></i> &nbsp; Added to Wishlist!`, 'success');
      // Here you can add code to actually add to wishlist/database
      // addToWishlist(productItem.getAttribute('data-name'));
    } else {
      showWishlistMessage(`<i class="bi bi-x-circle"></i> &nbsp; Removed from Wishlist!`, 'info');
      // Here you can add code to remove from wishlist/database
      // removeFromWishlist(productItem.getAttribute('data-name'));
    }

    // Animation effect
    button.style.transform = 'scale(1.2)';
    setTimeout(() => {
      button.style.transform = 'scale(1)';
    }, 150);
  }

  function showWishlistMessage(message, type) {
    // Create toast notification
    const toast = document.createElement('div');

    // Use the base Bootstrap alert classes + the custom CSS class 'wishlist-toast'
    toast.className = `alert alert-${type} position-fixed wishlist-toast`;

    toast.innerHTML = `
        <div class="d-flex align-items-center">
            ${message}
        </div>
    `;

    document.body.appendChild(toast);

    // Show toast by adding the 'show' class, which triggers the CSS transition
    setTimeout(() => {
      toast.classList.add('show');
    }, 100);

    // Hide and remove toast after 3 seconds
    setTimeout(() => {
      // Hide toast by removing the 'show' class
      toast.classList.remove('show');

      // Wait for the 0.3s CSS transition to complete, then remove from DOM
      const transitionDuration = 300;
      setTimeout(() => {
        if (document.body.contains(toast)) {
          document.body.removeChild(toast);
        }
      }, transitionDuration);
    }, 3000);
  }</script>
{% endblock %}